import{b as d,j as e,u as I,a as v,af as u,ag as R}from"./index-BUwxZ0dz.js";import{F as m,I as j,B as f}from"./index-D91Dgcjk.js";import{T as y,S as F,R as C}from"./EditOutlined-BMN32wtQ.js";import{R as h,D as l}from"./FileTextOutlined-qJkpyGSk.js";import{s as p,C as k}from"./AntdIcon-D9VCaoNQ.js";import{M as A}from"./index-HnUezucs.js";import{S as E}from"./index-DenBw2B0.js";import{R as B}from"./ReloadOutlined-aA4FmXlz.js";import"./objectWithoutPropertiesLoose-k0w7FEql.js";const{TextArea:L}=j,M=({visible:n,onSubmit:t,initialData:r})=>{const[o]=m.useForm();d.useEffect(()=>{r&&n?o.setFieldsValue({title:r.title,content:r.content}):o.resetFields()},[r,o,n]);const c=async s=>{try{const a=new FormData;a.append("title",s.title),a.append("content",s.content),await t(a)}catch{p.error("Something went wrong while saving terms and conditions")}};return e.jsxs(m,{form:o,layout:"vertical",onFinish:c,className:"terms-condition-form",children:[e.jsx("div",{style:{marginBottom:16,textAlign:"center"},children:e.jsx(y,{icon:e.jsx(h,{}),color:"orange",style:{fontSize:"14px",padding:"8px 16px"},children:"Terms & Conditions Information"})}),e.jsx(m.Item,{label:"Title",name:"title",rules:[{required:!0,message:"Please enter title"}],children:e.jsx(j,{placeholder:"Enter title (e.g., Terms & Conditions, Terms of Service, User Agreement)"})}),e.jsx(m.Item,{label:"Content",name:"content",rules:[{required:!0,message:"Please enter content"}],children:e.jsx(L,{rows:12,placeholder:"Enter detailed terms and conditions content including user responsibilities, prohibited activities, liability limitations, intellectual property, termination clauses, governing law, etc.",showCount:!0,maxLength:1e4})}),e.jsx("button",{type:"submit",style:{display:"none"},className:"terms-condition-form-submit-button"})]})},$=()=>{const n=I(),{termsCondition:t,loading:r,error:o}=v(i=>i.termsCondition),[c,s]=d.useState(!1),[a,g]=d.useState(!1);d.useEffect(()=>{n(u())},[n]),d.useEffect(()=>{o&&p.error(o)},[o]);const b=async i=>{try{g(!0),await n(R(i)).unwrap(),p.success(t?"✅ Terms & Conditions updated successfully":"✅ Terms & Conditions created successfully"),s(!1),n(u())}catch(x){p.error(x||"Operation failed")}finally{g(!1)}},T=()=>{const i=document.querySelector(".terms-condition-form-submit-button");i&&i.click()},S=i=>i.split(`
`).map((x,w)=>e.jsx("p",{style:{marginBottom:"16px",lineHeight:"1.6"},children:x},w));return e.jsxs(k,{title:e.jsxs("span",{children:[e.jsx(h,{style:{marginRight:8}}),"Terms & Conditions Management"]}),extra:e.jsxs(E,{children:[e.jsx(f,{icon:e.jsx(B,{}),onClick:()=>n(u()),loading:r,children:"Refresh"}),e.jsx(f,{type:"primary",icon:e.jsx(C,{}),onClick:()=>s(!0),children:t?"Edit Terms & Conditions":"Create Terms & Conditions"})]}),children:[r?e.jsx("div",{style:{textAlign:"center",padding:"50px"},children:e.jsx(F,{size:"large"})}):t?e.jsx("div",{children:e.jsxs(l,{bordered:!0,column:1,size:"default",labelStyle:{fontWeight:"bold",width:"150px"},children:[e.jsx(l.Item,{label:"Title",children:e.jsx(y,{color:"orange",style:{fontSize:"16px",padding:"4px 8px"},children:t.title})}),e.jsx(l.Item,{label:"Content",children:e.jsx("div",{style:{padding:"16px",backgroundColor:"#fafafa",borderRadius:"6px",maxHeight:"500px",overflowY:"auto",fontSize:"14px",lineHeight:"1.6"},children:S(t.content)})}),e.jsx(l.Item,{label:"Created",children:new Date(t.createdAt).toLocaleString()}),e.jsx(l.Item,{label:"Last Updated",children:new Date(t.updatedAt).toLocaleString()})]})}):e.jsxs("div",{style:{textAlign:"center",padding:"50px",border:"2px dashed #d9d9d9",borderRadius:"8px"},children:[e.jsx(h,{style:{fontSize:"48px",color:"#d9d9d9",marginBottom:"16px"}}),e.jsx("h3",{style:{color:"#999",marginBottom:"8px"},children:"No Terms & Conditions Content"}),e.jsx("p",{style:{color:"#999",marginBottom:"16px"},children:'Click "Create Terms & Conditions" to add your terms and conditions information'}),e.jsx(f,{type:"primary",icon:e.jsx(C,{}),onClick:()=>s(!0),children:"Create Terms & Conditions"})]}),e.jsx(A,{title:t?"Edit Terms & Conditions":"Create Terms & Conditions",open:c,onCancel:()=>s(!1),onOk:T,okText:t?"Update":"Create",confirmLoading:a,width:900,destroyOnClose:!0,children:e.jsx(M,{visible:c,onCancel:()=>s(!1),onSubmit:b,initialData:t,loading:a})})]})};export{$ as default};
