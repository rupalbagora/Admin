import{n as R,b as s,j as e,u as E,a as L,ad as m,ae as F}from"./index-BUwxZ0dz.js";import{F as p,I as P,B as x}from"./index-D91Dgcjk.js";import{T as b,S as M,R as v}from"./EditOutlined-BMN32wtQ.js";import{I as z,s as u,C as k}from"./AntdIcon-D9VCaoNQ.js";import{D as l,R as A}from"./FileTextOutlined-qJkpyGSk.js";import{M as B}from"./index-HnUezucs.js";import{S as D}from"./index-DenBw2B0.js";import{R as T}from"./ReloadOutlined-aA4FmXlz.js";import"./objectWithoutPropertiesLoose-k0w7FEql.js";var y={},j;function q(){if(j)return y;j=1,Object.defineProperty(y,"__esModule",{value:!0});var r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M866.9 169.9L527.1 54.1C523 52.7 517.5 52 512 52s-11 .7-15.1 2.1L157.1 169.9c-8.3 2.8-15.1 12.4-15.1 21.2v482.4c0 8.8 5.7 20.4 12.6 25.9L499.3 968c3.5 2.7 8 4.1 12.6 4.1s9.2-1.4 12.6-4.1l344.7-268.6c6.9-5.4 12.6-17 12.6-25.9V191.1c.2-8.8-6.6-18.3-14.9-21.2zM810 654.3L512 886.5 214 654.3V226.7l298-101.6 298 101.6v427.6zm-405.8-201c-3-4.1-7.8-6.6-13-6.6H336c-6.5 0-10.3 7.4-6.5 12.7l126.4 174a16.1 16.1 0 0026 0l212.6-292.7c3.8-5.3 0-12.7-6.5-12.7h-55.2c-5.1 0-10 2.5-13 6.6L468.9 542.4l-64.7-89.1z"}}]},name:"safety-certificate",theme:"outlined"};return y.default=r,y}var V=q();const H=R(V);function h(){return h=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])}return r},h.apply(this,arguments)}const $=(r,t)=>s.createElement(z,h({},r,{ref:t,icon:H})),C=s.forwardRef($),{TextArea:N}=P,U=({visible:r,onSubmit:t,initialData:a})=>{const[i]=p.useForm();s.useEffect(()=>{a&&r?i.setFieldsValue({title:a.title,content:a.content}):i.resetFields()},[a,i,r]);const d=async o=>{try{const c=new FormData;c.append("title",o.title),c.append("content",o.content),await t(c)}catch{u.error("Something went wrong while saving privacy policy")}};return e.jsxs(p,{form:i,layout:"vertical",onFinish:d,className:"privacy-policy-form",children:[e.jsx("div",{style:{marginBottom:16,textAlign:"center"},children:e.jsxs(b,{icon:e.jsx(C,{}),color:"green",style:{fontSize:"14px",padding:"8px 16px"},children:[" ","Privacy Policy Information"]})}),e.jsx(p.Item,{label:"Title",name:"title",rules:[{required:!0,message:"Please enter title"}],children:e.jsx(P,{placeholder:"Enter title (e.g., Privacy Policy, Data Protection Policy)"})}),e.jsx(p.Item,{label:"Content",name:"content",rules:[{required:!0,message:"Please enter content"}],children:e.jsx(N,{rows:12,placeholder:"Enter detailed privacy policy content including data collection, usage, storage, sharing, user rights, cookies, security measures, etc.",showCount:!0,maxLength:1e4})}),e.jsx("button",{type:"submit",style:{display:"none"},className:"privacy-policy-form-submit-button"})]})},ee=()=>{const r=E(),{privacyPolicy:t,loading:a,error:i}=L(n=>n.privacyPolicy),[d,o]=s.useState(!1),[c,g]=s.useState(!1);s.useEffect(()=>{r(m())},[r]),s.useEffect(()=>{i&&u.error(i)},[i]);const S=async n=>{try{g(!0),await r(F(n)).unwrap(),u.success(t?"✅ Privacy Policy updated successfully":"✅ Privacy Policy created successfully"),o(!1),r(m())}catch(f){u.error(f||"Operation failed")}finally{g(!1)}},w=()=>{const n=document.querySelector(".privacy-policy-form-submit-button");n&&n.click()},O=n=>n.split(`
`).map((f,I)=>e.jsx("p",{style:{marginBottom:"16px",lineHeight:"1.6"},children:f},I));return e.jsxs(k,{title:e.jsxs("span",{children:[e.jsx(C,{style:{marginRight:8}})," ","Privacy Policy Management"]}),extra:e.jsxs(D,{children:[e.jsx(x,{icon:e.jsx(T,{}),onClick:()=>r(m()),loading:a,children:"Refresh"}),e.jsx(x,{type:"primary",icon:e.jsx(v,{}),onClick:()=>o(!0),children:t?"Edit Privacy Policy":"Create Privacy Policy"})]}),children:[a?e.jsx("div",{style:{textAlign:"center",padding:"50px"},children:e.jsx(M,{size:"large"})}):t?e.jsx("div",{children:e.jsxs(l,{bordered:!0,column:1,size:"default",labelStyle:{fontWeight:"bold",width:"150px"},children:[e.jsx(l.Item,{label:"Title",children:e.jsx(b,{color:"green",style:{fontSize:"16px",padding:"4px 8px"},children:t.title})}),e.jsx(l.Item,{label:"Content",children:e.jsx("div",{style:{padding:"16px",backgroundColor:"#fafafa",borderRadius:"6px",maxHeight:"500px",overflowY:"auto",fontSize:"14px",lineHeight:"1.6"},children:O(t.content)})}),e.jsx(l.Item,{label:"Created",children:new Date(t.createdAt).toLocaleString()}),e.jsx(l.Item,{label:"Last Updated",children:new Date(t.updatedAt).toLocaleString()})]})}):e.jsxs("div",{style:{textAlign:"center",padding:"50px",border:"2px dashed #d9d9d9",borderRadius:"8px"},children:[e.jsx(A,{style:{fontSize:"48px",color:"#d9d9d9",marginBottom:"16px"}}),e.jsx("h3",{style:{color:"#999",marginBottom:"8px"},children:"No Privacy Policy Content"}),e.jsx("p",{style:{color:"#999",marginBottom:"16px"},children:'Click "Create Privacy Policy" to add your privacy policy information'}),e.jsx(x,{type:"primary",icon:e.jsx(v,{}),onClick:()=>o(!0),children:"Create Privacy Policy"})]}),e.jsx(B,{title:t?"Edit Privacy Policy":"Create Privacy Policy",open:d,onCancel:()=>o(!1),onOk:w,okText:t?"Update":"Create",confirmLoading:c,width:900,destroyOnClose:!0,children:e.jsx(U,{visible:d,onCancel:()=>o(!1),onSubmit:S,initialData:t,loading:c})})]})};export{ee as default};
