import{b as m,j as e,u as T,a as L,a3 as x,a4 as v,a5 as A,a6 as O}from"./index-BUwxZ0dz.js";import{F as n,I as j,B as h}from"./index-D91Dgcjk.js";import{T as N}from"./index-BsRJsCrQ.js";import{U as q,F as U,P as M,R as $}from"./DeleteOutlined-CY-A2Q_x.js";import{R as z}from"./UploadOutlined-BZUwM306.js";import{s as u,C as _}from"./AntdIcon-D9VCaoNQ.js";import{M as B}from"./index-HnUezucs.js";import{S as b}from"./index-DenBw2B0.js";import{R as V}from"./ReloadOutlined-aA4FmXlz.js";import{R as K}from"./PlusOutlined-05gYRiNT.js";import{T as W,R as Y}from"./EditOutlined-BMN32wtQ.js";import"./objectWithoutPropertiesLoose-k0w7FEql.js";const{TextArea:k}=j,G=({visible:o,onSubmit:y,initialData:a})=>{const[i]=n.useForm(),[p,l]=m.useState([]);m.useEffect(()=>{var s;a&&o?(i.setFieldsValue({name:a.name,price:a.price,review:a.review,description:a.description,offers:a.offers,usage:a.usage,items:((s=a.items)==null?void 0:s.join(", "))||""}),l(a.image?[{uid:"-1",name:"Existing Image",status:"done",url:a.image}]:[])):(i.resetFields(),l([]))},[a,i,o]);const g=async s=>{try{const t=new FormData;t.append("name",s.name),t.append("price",s.price.toString()),t.append("review",s.review||""),t.append("description",s.description||""),t.append("offers",s.offers||""),t.append("usage",s.usage||""),t.append("gender","Female"),s.items.split(",").map(d=>d.trim()).filter(d=>d).forEach(d=>{t.append("items",d)}),p.length>0&&p[0].originFileObj&&t.append("image",p[0].originFileObj),await y(t,a==null?void 0:a._id)}catch{u.error("Something went wrong while saving the female product package")}};return e.jsxs(n,{form:i,layout:"vertical",onFinish:g,className:"female-product-package-form",children:[e.jsx(n.Item,{label:"Package Name",name:"name",rules:[{required:!0,message:"Please enter package name"}],children:e.jsx(j,{placeholder:"Enter female package name"})}),e.jsx(n.Item,{label:"Price",name:"price",rules:[{required:!0,message:"Please enter price"}],children:e.jsx(N,{min:0,style:{width:"100%"},placeholder:"Enter package price"})}),e.jsx(n.Item,{label:"Description",name:"description",rules:[{required:!0,message:"Please enter description"}],children:e.jsx(k,{rows:3,placeholder:"Enter package description for female customers"})}),e.jsx(n.Item,{label:"Items",name:"items",rules:[{required:!0,message:"Please enter items"}],extra:"Separate items with commas",children:e.jsx(k,{rows:3,placeholder:"Enter items for female customers (e.g., Face Cream, Lipstick, Perfume)"})}),e.jsx(n.Item,{label:"Review",name:"review",children:e.jsx(k,{rows:2,placeholder:"Enter review"})}),e.jsx(n.Item,{label:"Offers",name:"offers",children:e.jsx(j,{placeholder:"Enter offers (e.g., Save â‚¹200 on female beauty combo)"})}),e.jsx(n.Item,{label:"Usage Instructions",name:"usage",children:e.jsx(k,{rows:2,placeholder:"Enter usage instructions for female customers"})}),e.jsxs(n.Item,{label:"Package Image",rules:a?[]:[{required:!0,message:"Please upload an image"}],children:[e.jsx(q,{listType:"picture",maxCount:1,fileList:p,onChange:({fileList:s})=>l(s),beforeUpload:()=>!1,accept:"image/*",children:e.jsx(h,{icon:e.jsx(z,{}),children:a?"Change Image":"Select Image"})}),!a&&e.jsx("div",{style:{color:"#999",fontSize:"12px",marginTop:"4px"},children:"Image is required for new packages"})]}),e.jsx("button",{type:"submit",style:{display:"none"},className:"female-product-package-form-submit-button"})]})},{Search:H}=j,ne=()=>{const o=T(),{packages:y=[],loading:a=!1,error:i=null}=L(r=>r.productPackages),[p,l]=m.useState(!1),[g,s]=m.useState(null),[t,P]=m.useState(""),[d,w]=m.useState(!1);m.useEffect(()=>{o(x())},[o]),m.useEffect(()=>{i&&u.error(i)},[i]);const I=y.filter(r=>r.gender==="Female"),F=async(r,c)=>{try{w(!0),c?(await o(v({id:c,formData:r})).unwrap(),u.success("âœ… Female product package updated successfully")):(await o(A(r)).unwrap(),u.success("âœ… Female product package added successfully")),l(!1),s(null),o(x())}catch(f){u.error(f||"Operation failed")}finally{w(!1)}},S=async r=>{try{await o(O(r)).unwrap(),u.success("ðŸ—‘ï¸ Female product package deleted successfully"),o(x())}catch{u.error("Failed to delete product package")}},C=()=>{const r=document.querySelector(".female-product-package-form-submit-button");r&&r.click()},E=I.filter(r=>{var c,f;return r.name.toLowerCase().includes(t.toLowerCase())||((c=r.description)==null?void 0:c.toLowerCase().includes(t.toLowerCase()))||((f=r.offers)==null?void 0:f.toLowerCase().includes(t.toLowerCase()))}),R=[{title:"Image",dataIndex:"image",key:"image",render:r=>r?e.jsx("img",{src:r,alt:"product package",width:60,height:60,style:{borderRadius:6,objectFit:"cover"}}):e.jsx(W,{color:"red",children:"No Image"})},{title:"Name",dataIndex:"name",key:"name"},{title:"Price",dataIndex:"price",key:"price",render:r=>`â‚¹${r}`},{title:"Description",dataIndex:"description",key:"description",ellipsis:!0},{title:"Items",dataIndex:"items",key:"items",render:r=>e.jsxs("div",{style:{maxWidth:200},children:[r==null?void 0:r.slice(0,2).map((c,f)=>e.jsxs("div",{style:{fontSize:"12px"},children:["â€¢ ",c]},f)),(r==null?void 0:r.length)>2&&e.jsxs("div",{style:{fontSize:"12px",color:"#999"},children:["+",r.length-2," more"]})]})},{title:"Offers",dataIndex:"offers",key:"offers",ellipsis:!0,render:r=>r||"-"},{title:"Actions",key:"actions",render:(r,c)=>e.jsxs(b,{children:[e.jsx(h,{type:"primary",icon:e.jsx(Y,{}),onClick:()=>{s(c),l(!0)}}),e.jsx(M,{title:"Are you sure to delete this female product package?",onConfirm:()=>S(c._id),okText:"Yes",cancelText:"No",children:e.jsx(h,{danger:!0,icon:e.jsx($,{})})})]})}];return e.jsxs(_,{title:e.jsxs("span",{children:["Female Product Package Â  (",I.length," packages)"]}),extra:e.jsxs(b,{children:[e.jsx(h,{icon:e.jsx(V,{}),onClick:()=>o(x()),loading:a,children:"Refresh"}),e.jsx(h,{type:"primary",icon:e.jsx(K,{}),onClick:()=>{s(null),l(!0)},children:"Add Package"})]}),children:[e.jsx(H,{placeholder:"Search female product packages...",value:t,onChange:r=>P(r.target.value),allowClear:!0,style:{marginBottom:16,width:"50%"}}),e.jsx(U,{rowKey:"_id",columns:R,dataSource:E,loading:a,pagination:{pageSize:5},locale:{emptyText:"No female product packages found"}}),e.jsx(B,{title:g?"Edit Female Product Package":"Add Product Package",open:p,onCancel:()=>{l(!1),s(null)},onOk:C,okText:g?"Update":"Add Product Package",confirmLoading:d,width:700,destroyOnClose:!0,children:e.jsx(G,{visible:p,onCancel:()=>{l(!1),s(null)},onSubmit:F,initialData:g,loading:d})})]})};export{ne as default};
