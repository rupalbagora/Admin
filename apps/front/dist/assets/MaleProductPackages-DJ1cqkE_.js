import{n as L,b as i,j as e,u as T,a as A,a3 as j,a4 as q,a5 as N,a6 as _}from"./index-BUwxZ0dz.js";import{F as l,I as w,B as x}from"./index-D91Dgcjk.js";import{T as $}from"./index-BsRJsCrQ.js";import{U as z,F as U,P as B,R as V}from"./DeleteOutlined-CY-A2Q_x.js";import{R as H}from"./UploadOutlined-BZUwM306.js";import{I as W,s as g,C as G}from"./AntdIcon-D9VCaoNQ.js";import{M as K}from"./index-HnUezucs.js";import{S as M}from"./index-DenBw2B0.js";import{R as Y}from"./ReloadOutlined-aA4FmXlz.js";import{R as J}from"./PlusOutlined-05gYRiNT.js";import{T as Q,R as X}from"./EditOutlined-BMN32wtQ.js";import"./objectWithoutPropertiesLoose-k0w7FEql.js";var k={},v;function Z(){if(v)return k;v=1,Object.defineProperty(k,"__esModule",{value:!0});var s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M874 120H622c-3.3 0-6 2.7-6 6v56c0 3.3 2.7 6 6 6h160.4L583.1 387.3c-50-38.5-111-59.3-175.1-59.3-76.9 0-149.3 30-203.6 84.4S120 539.1 120 616s30 149.3 84.4 203.6C258.7 874 331.1 904 408 904s149.3-30 203.6-84.4C666 765.3 696 692.9 696 616c0-64.1-20.8-124.9-59.2-174.9L836 241.9V402c0 3.3 2.7 6 6 6h56c3.3 0 6-2.7 6-6V150c0-16.5-13.5-30-30-30zM408 828c-116.9 0-212-95.1-212-212s95.1-212 212-212 212 95.1 212 212-95.1 212-212 212z"}}]},name:"man",theme:"outlined"};return k.default=s,k}var D=Z();const ee=L(D);function P(){return P=Object.assign?Object.assign.bind():function(s){for(var d=1;d<arguments.length;d++){var a=arguments[d];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(s[n]=a[n])}return s},P.apply(this,arguments)}const re=(s,d)=>i.createElement(W,P({},s,{ref:d,icon:ee})),ae=i.forwardRef(re),{TextArea:y}=w,se=({visible:s,onSubmit:d,initialData:a})=>{const[n]=l.useForm(),[m,p]=i.useState([]);i.useEffect(()=>{var t;a&&s?(n.setFieldsValue({name:a.name,price:a.price,review:a.review,description:a.description,offers:a.offers,usage:a.usage,items:((t=a.items)==null?void 0:t.join(", "))||""}),p(a.image?[{uid:"-1",name:"Existing Image",status:"done",url:a.image}]:[])):(n.resetFields(),p([]))},[a,n,s]);const h=async t=>{try{const o=new FormData;o.append("name",t.name),o.append("price",t.price.toString()),o.append("review",t.review||""),o.append("description",t.description||""),o.append("offers",t.offers||""),o.append("usage",t.usage||""),o.append("gender","Male"),t.items.split(",").map(u=>u.trim()).filter(u=>u).forEach(u=>{o.append("items",u)}),m.length>0&&m[0].originFileObj&&o.append("image",m[0].originFileObj),await d(o,a==null?void 0:a._id)}catch{g.error("Something went wrong while saving the male product package")}};return e.jsxs(l,{form:n,layout:"vertical",onFinish:h,className:"male-product-package-form",children:[e.jsx(l.Item,{label:"Package Name",name:"name",rules:[{required:!0,message:"Please enter package name"}],children:e.jsx(w,{placeholder:"Enter male package name"})}),e.jsx(l.Item,{label:"Price",name:"price",rules:[{required:!0,message:"Please enter price"}],children:e.jsx($,{min:0,style:{width:"100%"},placeholder:"Enter package price"})}),e.jsx(l.Item,{label:"Description",name:"description",rules:[{required:!0,message:"Please enter description"}],children:e.jsx(y,{rows:3,placeholder:"Enter package description for male customers"})}),e.jsx(l.Item,{label:"Items",name:"items",rules:[{required:!0,message:"Please enter items"}],extra:"Separate items with commas",children:e.jsx(y,{rows:3,placeholder:"Enter items for male customers (e.g., Beard Oil, Hair Gel, Face Wash)"})}),e.jsx(l.Item,{label:"Review",name:"review",children:e.jsx(y,{rows:2,placeholder:"Enter review"})}),e.jsx(l.Item,{label:"Offers",name:"offers",children:e.jsx(w,{placeholder:"Enter offers (e.g., Save â‚¹200 on male grooming combo)"})}),e.jsx(l.Item,{label:"Usage Instructions",name:"usage",children:e.jsx(y,{rows:2,placeholder:"Enter usage instructions for male customers"})}),e.jsxs(l.Item,{label:"Package Image",rules:a?[]:[{required:!0,message:"Please upload an image"}],children:[e.jsx(z,{listType:"picture",maxCount:1,fileList:m,onChange:({fileList:t})=>p(t),beforeUpload:()=>!1,accept:"image/*",children:e.jsx(x,{icon:e.jsx(H,{}),children:a?"Change Image":"Select Image"})}),!a&&e.jsx("div",{style:{color:"#999",fontSize:"12px",marginTop:"4px"},children:"Image is required for new packages"})]}),e.jsx("button",{type:"submit",style:{display:"none"},className:"male-product-package-form-submit-button"})]})},{Search:te}=w,xe=()=>{const s=T(),{packages:d=[],loading:a=!1,error:n=null}=A(r=>r.productPackages),[m,p]=i.useState(!1),[h,t]=i.useState(null),[o,I]=i.useState(""),[u,b]=i.useState(!1);i.useEffect(()=>{s(j())},[s]),i.useEffect(()=>{n&&g.error(n)},[n]);const S=d.filter(r=>r.gender==="Male"),C=async(r,c)=>{try{b(!0),c?(await s(q({id:c,formData:r})).unwrap(),g.success("âœ… Male product package updated successfully")):(await s(N(r)).unwrap(),g.success("âœ… Male product package added successfully")),p(!1),t(null),s(j())}catch(f){g.error(f||"Operation failed")}finally{b(!1)}},O=async r=>{try{await s(_(r)).unwrap(),g.success("ðŸ—‘ï¸ Male product package deleted successfully"),s(j())}catch{g.error("Failed to delete product package")}},E=()=>{const r=document.querySelector(".male-product-package-form-submit-button");r&&r.click()},F=S.filter(r=>{var c,f;return r.name.toLowerCase().includes(o.toLowerCase())||((c=r.description)==null?void 0:c.toLowerCase().includes(o.toLowerCase()))||((f=r.offers)==null?void 0:f.toLowerCase().includes(o.toLowerCase()))}),R=[{title:"Image",dataIndex:"image",key:"image",render:r=>r?e.jsx("img",{src:r,alt:"product package",width:60,height:60,style:{borderRadius:6,objectFit:"cover"}}):e.jsx(Q,{color:"red",children:"No Image"})},{title:"Name",dataIndex:"name",key:"name"},{title:"Price",dataIndex:"price",key:"price",render:r=>`â‚¹${r}`},{title:"Description",dataIndex:"description",key:"description",ellipsis:!0},{title:"Items",dataIndex:"items",key:"items",render:r=>e.jsxs("div",{style:{maxWidth:200},children:[r==null?void 0:r.slice(0,2).map((c,f)=>e.jsxs("div",{style:{fontSize:"12px"},children:["â€¢ ",c]},f)),(r==null?void 0:r.length)>2&&e.jsxs("div",{style:{fontSize:"12px",color:"#999"},children:["+",r.length-2," more"]})]})},{title:"Offers",dataIndex:"offers",key:"offers",ellipsis:!0,render:r=>r||"-"},{title:"Actions",key:"actions",render:(r,c)=>e.jsxs(M,{children:[e.jsx(x,{type:"primary",icon:e.jsx(X,{}),onClick:()=>{t(c),p(!0)}}),e.jsx(B,{title:"Are you sure to delete this male product package?",onConfirm:()=>O(c._id),okText:"Yes",cancelText:"No",children:e.jsx(x,{danger:!0,icon:e.jsx(V,{})})})]})}];return e.jsxs(G,{title:e.jsxs("span",{children:[e.jsx(ae,{style:{marginRight:8}}),"Male Product Package (",S.length," packages)"]}),extra:e.jsxs(M,{children:[e.jsx(x,{icon:e.jsx(Y,{}),onClick:()=>s(j()),loading:a,children:"Refresh"}),e.jsx(x,{type:"primary",icon:e.jsx(J,{}),onClick:()=>{t(null),p(!0)},children:"Add Package"})]}),children:[e.jsx(te,{placeholder:"Search male product packages...",value:o,onChange:r=>I(r.target.value),allowClear:!0,style:{marginBottom:16,width:"50%"}}),e.jsx(U,{rowKey:"_id",columns:R,dataSource:F,loading:a,pagination:{pageSize:5},locale:{emptyText:"No male product packages found"}}),e.jsx(K,{title:h?"Edit Male Product Package":"Add Product Package",open:m,onCancel:()=>{p(!1),t(null)},onOk:E,okText:h?"Update":"Add Product Package",confirmLoading:u,width:700,destroyOnClose:!0,children:e.jsx(se,{visible:m,onCancel:()=>{p(!1),t(null)},onSubmit:C,initialData:h,loading:u})})]})};export{xe as default};
