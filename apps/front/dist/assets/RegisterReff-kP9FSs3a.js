import{u as b,c as N,b as f,j as e,m as j}from"./index-BUwxZ0dz.js";import{u as g}from"./useEmailValidator-BIzpjTAT.js";const E=()=>{const n=b(),i=N(),c=new URLSearchParams(location.search).get("ref")||"",[a,o]=f.useState({firstName:"",lastName:"",email:"",password:"",phone:""}),{validateEmail:d,available:s,checking:u,error:m}=g(),x=async l=>{if(l.preventDefault(),s===!1){alert("Email already exists");return}try{await n(j({reff:c,data:a})).unwrap(),i("/")}catch(t){console.error("Registration failed:",t)}},r=l=>{const{name:t,value:h}=l.target;o(p=>({...p,[t]:h}))};return e.jsxs("div",{className:"max-w-md mx-auto mt-10 p-6 bg-white rounded shadow",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Register"}),e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"First Name"}),e.jsx("input",{type:"text",name:"firstName",value:a.firstName,onChange:r,className:"w-full p-2 border rounded",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Last Name"}),e.jsx("input",{type:"text",name:"lastName",value:a.lastName,onChange:r,className:"w-full p-2 border rounded",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:a.email,onChange:r,onBlur:()=>d(a.email),className:`w-full p-2 border rounded ${s===!1?"border-red-500":s===!0?"border-green-500":""}`,required:!0}),u&&e.jsx("p",{className:"text-sm text-blue-500",children:"Checking email..."}),s===!1&&e.jsx("p",{className:"text-sm text-red-500",children:"Email already exists"}),s===!0&&e.jsx("p",{className:"text-sm text-green-600",children:"Email is available"}),m&&e.jsx("p",{className:"text-sm text-red-400",children:m})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Password"}),e.jsx("input",{type:"password",name:"password",value:a.password,onChange:r,className:"w-full p-2 border rounded",required:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block mb-2",children:"Phone"}),e.jsx("input",{type:"tel",name:"phone",value:a.phone,onChange:r,className:"w-full p-2 border rounded"})]}),e.jsx("button",{type:"submit",className:"w-full bg-gray-500 text-white py-2 px-4 rounded hover:bg-gray-600",children:"Register"})]})]})};export{E as default};
