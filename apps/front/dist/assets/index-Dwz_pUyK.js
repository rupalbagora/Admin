import{b as e}from"./index-BUwxZ0dz.js";import{g as ne,m as se,r as ae,u as ie,j as le,i as q,b as ce,k as de,l as ue,n as D,c as T,o as ge,t as me,p as pe}from"./AntdIcon-D9VCaoNQ.js";import{P as ve}from"./UploadOutlined-BZUwM306.js";const H=e.createContext({}),fe=t=>{const{antCls:r,componentCls:a,iconCls:o,avatarBg:n,avatarColor:d,containerSize:y,containerSizeLG:u,containerSizeSM:x,textFontSize:b,textFontSizeLG:S,textFontSizeSM:M,iconFontSize:G,iconFontSizeLG:v,iconFontSizeSM:N,borderRadius:h,borderRadiusLG:z,borderRadiusSM:L,lineWidth:s,lineType:C}=t,f=(O,E,R,$)=>({width:O,height:O,borderRadius:"50%",fontSize:E,[`&${a}-square`]:{borderRadius:$},[`&${a}-icon`]:{fontSize:R,[`> ${o}`]:{margin:0}}});return{[a]:Object.assign(Object.assign(Object.assign(Object.assign({},ae(t)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:d,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:n,border:`${ie(s)} ${C} transparent`,"&-image":{background:"transparent"},[`${r}-image-img`]:{display:"block"}}),f(y,b,G,h)),{"&-lg":Object.assign({},f(u,S,v,z)),"&-sm":Object.assign({},f(x,M,N,L)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},Se=t=>{const{componentCls:r,groupBorderColor:a,groupOverlapping:o,groupSpace:n}=t;return{[`${r}-group`]:{display:"inline-flex",[r]:{borderColor:a},"> *:not(:first-child)":{marginInlineStart:o}},[`${r}-group-popover`]:{[`${r} + ${r}`]:{marginInlineStart:n}}}},he=t=>{const{controlHeight:r,controlHeightLG:a,controlHeightSM:o,fontSize:n,fontSizeLG:d,fontSizeXL:y,fontSizeHeading3:u,marginXS:x,marginXXS:b,colorBorderBg:S}=t;return{containerSize:r,containerSizeLG:a,containerSizeSM:o,textFontSize:n,textFontSizeLG:n,textFontSizeSM:n,iconFontSize:Math.round((d+y)/2),iconFontSizeLG:u,iconFontSizeSM:n,groupSpace:b,groupOverlapping:-x,groupBorderColor:S}},J=ne("Avatar",t=>{const{colorTextLightSolid:r,colorTextPlaceholder:a}=t,o=se(t,{avatarBg:a,avatarColor:r});return[fe(o),Se(o)]},he);var Ce=function(t,r){var a={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(a[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,o=Object.getOwnPropertySymbols(t);n<o.length;n++)r.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(t,o[n])&&(a[o[n]]=t[o[n]]);return a};const K=e.forwardRef((t,r)=>{const{prefixCls:a,shape:o,size:n,src:d,srcSet:y,icon:u,className:x,rootClassName:b,style:S,alt:M,draggable:G,children:v,crossOrigin:N,gap:h=4,onError:z}=t,L=Ce(t,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","style","alt","draggable","children","crossOrigin","gap","onError"]),[s,C]=e.useState(1),[f,O]=e.useState(!1),[E,R]=e.useState(!0),$=e.useRef(null),j=e.useRef(null),F=le(r,$),{getPrefixCls:P,avatar:m}=e.useContext(q),g=e.useContext(H),k=()=>{if(!j.current||!$.current)return;const l=j.current.offsetWidth,i=$.current.offsetWidth;l!==0&&i!==0&&h*2<i&&C(i-h*2<l?(i-h*2)/l:1)};e.useEffect(()=>{O(!0)},[]),e.useEffect(()=>{R(!0),C(1)},[d]),e.useEffect(k,[h]);const B=()=>{(z==null?void 0:z())!==!1&&R(!1)},c=ce(l=>{var i,A;return(A=(i=n??(g==null?void 0:g.size))!==null&&i!==void 0?i:l)!==null&&A!==void 0?A:"default"}),_=Object.keys(typeof c=="object"?c||{}:{}).some(l=>["xs","sm","md","lg","xl","xxl"].includes(l)),I=de(_),Q=e.useMemo(()=>{if(typeof c!="object")return{};const l=ue.find(A=>I[A]),i=c[l];return i?{width:i,height:i,fontSize:i&&(u||v)?i/2:18}:{}},[I,c,u,v]),p=P("avatar",a),V=D(p),[U,Y,Z]=J(p,V),ee=T({[`${p}-lg`]:c==="large",[`${p}-sm`]:c==="small"}),W=e.isValidElement(d),te=o||(g==null?void 0:g.shape)||"circle",oe=T(p,ee,m==null?void 0:m.className,`${p}-${te}`,{[`${p}-image`]:W||d&&E,[`${p}-icon`]:!!u},Z,V,x,b,Y),re=typeof c=="number"?{width:c,height:c,fontSize:u?c/2:18}:{};let w;if(typeof d=="string"&&E)w=e.createElement("img",{src:d,draggable:G,srcSet:y,onError:B,alt:M,crossOrigin:N});else if(W)w=d;else if(u)w=u;else if(f||s!==1){const l=`scale(${s})`,i={msTransform:l,WebkitTransform:l,transform:l};w=e.createElement(ge,{onResize:k},e.createElement("span",{className:`${p}-string`,ref:j,style:i},v))}else w=e.createElement("span",{className:`${p}-string`,style:{opacity:0},ref:j},v);return U(e.createElement("span",Object.assign({},L,{style:Object.assign(Object.assign(Object.assign(Object.assign({},re),Q),m==null?void 0:m.style),S),className:oe,ref:F}),w))}),X=t=>{const{size:r,shape:a}=e.useContext(H),o=e.useMemo(()=>({size:t.size||r,shape:t.shape||a}),[t.size,t.shape,r,a]);return e.createElement(H.Provider,{value:o},t.children)},ye=t=>{var r,a,o,n;const{getPrefixCls:d,direction:y}=e.useContext(q),{prefixCls:u,className:x,rootClassName:b,style:S,maxCount:M,maxStyle:G,size:v,shape:N,maxPopoverPlacement:h,maxPopoverTrigger:z,children:L,max:s}=t,C=d("avatar",u),f=`${C}-group`,O=D(C),[E,R,$]=J(C,O),j=T(f,{[`${f}-rtl`]:y==="rtl"},$,O,x,b,R),F=me(L).map((g,k)=>pe(g,{key:`avatar-key-${k}`})),P=(s==null?void 0:s.count)||M,m=F.length;if(P&&P<m){const g=F.slice(0,P),k=F.slice(P,m),B=(s==null?void 0:s.style)||G,c=((r=s==null?void 0:s.popover)===null||r===void 0?void 0:r.trigger)||z||"hover",_=((a=s==null?void 0:s.popover)===null||a===void 0?void 0:a.placement)||h||"top",I=Object.assign(Object.assign({content:k},s==null?void 0:s.popover),{classNames:{root:T(`${f}-popover`,(n=(o=s==null?void 0:s.popover)===null||o===void 0?void 0:o.classNames)===null||n===void 0?void 0:n.root)},placement:_,trigger:c});return g.push(e.createElement(ve,Object.assign({key:"avatar-popover-key",destroyOnHidden:!0},I),e.createElement(K,{style:B},`+${m-P}`))),E(e.createElement(X,{shape:N,size:v},e.createElement("div",{className:j,style:S},g)))}return E(e.createElement(X,{shape:N,size:v},e.createElement("div",{className:j,style:S},F)))},xe=K;xe.Group=ye;export{xe as A};
