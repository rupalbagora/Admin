import{b as n,j as e,u as C,a as M,X as f,Y as E,Z as A,_ as L}from"./index-BUwxZ0dz.js";import{F as c,I as j,B as h}from"./index-D91Dgcjk.js";import{T as k}from"./index-BsRJsCrQ.js";import{S as b}from"./index-DenBw2B0.js";import{U as $,F as q,P as O,R as N}from"./DeleteOutlined-CY-A2Q_x.js";import{R as U}from"./UploadOutlined-BZUwM306.js";import{s as p,C as _}from"./AntdIcon-D9VCaoNQ.js";import{M as B}from"./index-HnUezucs.js";import{R as V}from"./ReloadOutlined-aA4FmXlz.js";import{R as z}from"./PlusOutlined-05gYRiNT.js";import{T as Y,R as K}from"./EditOutlined-BMN32wtQ.js";import"./objectWithoutPropertiesLoose-k0w7FEql.js";const X=({visible:l,onSubmit:y,initialData:a})=>{const[i]=c.useForm(),[d,o]=n.useState([]);n.useEffect(()=>{a&&l?(i.setFieldsValue({title:a.title,price:a.price,services:a.services,about:a.about,discount:a.discount,review:a.review,rating:a.rating}),o(a.image?[{uid:"-1",name:"Existing Image",status:"done",url:a.image}]:[])):(i.resetFields(),o([]))},[a,i,l]);const u=async s=>{var g,x;try{const r=new FormData;r.append("title",s.title),r.append("price",s.price.toString()),r.append("services",s.services),r.append("about",s.about),r.append("discount",s.discount||""),r.append("review",((g=s.review)==null?void 0:g.toString())||"0"),r.append("rating",((x=s.rating)==null?void 0:x.toString())||"0"),r.append("gender","Male"),d.length>0&&d[0].originFileObj&&r.append("image",d[0].originFileObj),await y(r,a==null?void 0:a._id)}catch{p.error("Something went wrong while saving the male package")}};return e.jsxs(c,{form:i,layout:"vertical",onFinish:u,className:"male-package-form",children:[e.jsx(c.Item,{label:"Title",name:"title",rules:[{required:!0,message:"Please enter title"}],children:e.jsx(j,{placeholder:"Enter male package title"})}),e.jsx(c.Item,{label:"Price",name:"price",rules:[{required:!0,message:"Please enter price"}],children:e.jsx(k,{min:0,style:{width:"100%"},placeholder:"Enter package price"})}),e.jsx(c.Item,{label:"Services",name:"services",rules:[{required:!0,message:"Please enter services"}],children:e.jsx(j.TextArea,{rows:3,placeholder:"Enter services specifically for male customers"})}),e.jsx(c.Item,{label:"About",name:"about",rules:[{required:!0,message:"Please enter about description"}],children:e.jsx(j.TextArea,{rows:3,placeholder:"Enter package description for male customers"})}),e.jsx(c.Item,{label:"Discount",name:"discount",children:e.jsx(k,{min:0,style:{width:"100%"},placeholder:"Enter discount amount"})}),e.jsxs(b,{style:{width:"100%"},children:[e.jsx(c.Item,{label:"Review",name:"review",style:{width:"48%"},children:e.jsx(k,{min:0,style:{width:"100%"},placeholder:"Review count"})}),e.jsx(c.Item,{label:"Rating",name:"rating",style:{width:"48%"},children:e.jsx(k,{min:0,max:5,style:{width:"100%"},placeholder:"Rating (0-5)"})})]}),e.jsxs(c.Item,{label:"Package Image",rules:a?[]:[{required:!0,message:"Please upload an image"}],children:[e.jsx($,{listType:"picture",maxCount:1,fileList:d,onChange:({fileList:s})=>o(s),beforeUpload:()=>!1,accept:"image/*",children:e.jsx(h,{icon:e.jsx(U,{}),children:a?"Change Image":"Select Image"})}),!a&&e.jsx("div",{style:{color:"#999",fontSize:"12px",marginTop:"4px"},children:"Image is required for new packages"})]}),e.jsx("button",{type:"submit",style:{display:"none"},className:"male-package-form-submit-button"})]})},{Search:Z}=j,ce=()=>{const l=C(),{packages:y=[],loading:a=!1,error:i=null}=M(t=>t.packages),[d,o]=n.useState(!1),[u,s]=n.useState(null),[g,x]=n.useState(""),[r,w]=n.useState(!1);n.useEffect(()=>{l(f())},[l]),n.useEffect(()=>{i&&p.error(i)},[i]);const I=y.filter(t=>t.gender==="Male"),P=async(t,m)=>{try{w(!0),m?(await l(E({id:m,formData:t})).unwrap(),p.success("âœ… Male package updated successfully")):(await l(A(t)).unwrap(),p.success("âœ… Male package added successfully")),o(!1),s(null),l(f())}catch(T){p.error(T||"Operation failed")}finally{w(!1)}},S=async t=>{try{await l(L(t)).unwrap(),p.success("ðŸ—‘ï¸ Male package deleted successfully"),l(f())}catch{p.error("Failed to delete male package")}},v=()=>{const t=document.querySelector(".male-package-form-submit-button");t&&t.click()},R=I.filter(t=>t.title.toLowerCase().includes(g.toLowerCase())),F=[{title:"Image",dataIndex:"image",key:"image",render:t=>t?e.jsx("img",{src:t,alt:"package",width:60,height:60,style:{borderRadius:6,objectFit:"cover"}}):e.jsx(Y,{color:"red",children:"No Image"})},{title:"Title",dataIndex:"title",key:"title"},{title:"Price",dataIndex:"price",key:"price",render:t=>`â‚¹${t}`},{title:"Services",dataIndex:"services",key:"services",ellipsis:!0},{title:"About",dataIndex:"about",key:"about",ellipsis:!0},{title:"Discount",dataIndex:"discount",key:"discount",render:t=>t?`â‚¹${t}`:"-"},{title:"Rating",dataIndex:"rating",key:"rating",render:t=>t?`${t}/5`:"-"},{title:"Actions",key:"actions",render:(t,m)=>e.jsxs(b,{children:[e.jsx(h,{type:"primary",icon:e.jsx(K,{}),onClick:()=>{s(m),o(!0)}}),e.jsx(O,{title:"Are you sure to delete this male package?",onConfirm:()=>S(m._id),okText:"Yes",cancelText:"No",children:e.jsx(h,{danger:!0,icon:e.jsx(N,{})})})]})}];return e.jsxs(_,{title:`Male Packages     (${I.length} packages)`,extra:e.jsxs(b,{children:[e.jsx(h,{icon:e.jsx(V,{}),onClick:()=>l(f()),loading:a,children:"Refresh"}),e.jsx(h,{type:"primary",icon:e.jsx(z,{}),onClick:()=>{s(null),o(!0)},children:"Add Package"})]}),children:[e.jsx(Z,{placeholder:"Search male packages by title...",value:g,onChange:t=>x(t.target.value),allowClear:!0,style:{marginBottom:16,width:"50%"}}),e.jsx(q,{rowKey:"_id",columns:F,dataSource:R,loading:a,pagination:{pageSize:5},locale:{emptyText:"No male packages found"}}),e.jsx(B,{title:u?"Edit Male Package":"Add Package",open:d,onCancel:()=>{o(!1),s(null)},onOk:v,okText:u?"Update":"Add Package",confirmLoading:r,width:700,destroyOnClose:!0,children:e.jsx(X,{visible:d,onCancel:()=>{o(!1),s(null)},onSubmit:P,initialData:u,loading:r})})]})};export{ce as default};
