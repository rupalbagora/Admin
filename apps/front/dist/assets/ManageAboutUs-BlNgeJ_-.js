import{b as l,j as e,u as w,a as R,ab as x,ac as I}from"./index-BUwxZ0dz.js";import{F as d,I as j,B as f}from"./index-D91Dgcjk.js";import{T as g,S as v,R as b}from"./EditOutlined-BMN32wtQ.js";import{R as y}from"./InfoCircleOutlined-BXqNngfG.js";import{s as m,C as F}from"./AntdIcon-D9VCaoNQ.js";import{D as u,R as k}from"./FileTextOutlined-qJkpyGSk.js";import{M as E}from"./index-HnUezucs.js";import{S as B}from"./index-DenBw2B0.js";import{R as M}from"./ReloadOutlined-aA4FmXlz.js";import"./objectWithoutPropertiesLoose-k0w7FEql.js";const{TextArea:O}=j,L=({visible:o,onSubmit:t,initialData:a})=>{const[s]=d.useForm();l.useEffect(()=>{a&&o?s.setFieldsValue({title:a.title,content:a.content}):s.resetFields()},[a,s,o]);const c=async r=>{try{const i=new FormData;i.append("title",r.title),i.append("content",r.content),await t(i)}catch{m.error("Something went wrong while saving about us information")}};return e.jsxs(d,{form:s,layout:"vertical",onFinish:c,className:"about-us-form",children:[e.jsx("div",{style:{marginBottom:16,textAlign:"center"},children:e.jsx(g,{icon:e.jsx(y,{}),color:"blue",style:{fontSize:"14px",padding:"8px 16px"},children:"About Us Information"})}),e.jsx(d.Item,{label:"Title",name:"title",rules:[{required:!0,message:"Please enter title"}],children:e.jsx(j,{placeholder:"Enter title (e.g., About Our Company, Our Story, Who We Are)"})}),e.jsx(d.Item,{label:"Content",name:"content",rules:[{required:!0,message:"Please enter content"}],children:e.jsx(O,{rows:10,placeholder:"Enter detailed content about your company, mission, vision, values, history, team, etc.",showCount:!0,maxLength:5e3})}),e.jsx("button",{type:"submit",style:{display:"none"},className:"about-us-form-submit-button"})]})},Y=()=>{const o=w(),{aboutUs:t,loading:a,error:s}=R(n=>n.aboutUs),[c,r]=l.useState(!1),[i,h]=l.useState(!1);l.useEffect(()=>{o(x())},[o]),l.useEffect(()=>{s&&m.error(s)},[s]);const A=async n=>{try{h(!0),await o(I(n)).unwrap(),m.success(t?"✅ About Us updated successfully":"✅ About Us created successfully"),r(!1),o(x())}catch(p){m.error(p||"Operation failed")}finally{h(!1)}},C=()=>{const n=document.querySelector(".about-us-form-submit-button");n&&n.click()},U=n=>n.split(`
`).map((p,S)=>e.jsx("p",{style:{marginBottom:"16px",lineHeight:"1.6"},children:p},S));return e.jsxs(F,{title:e.jsxs("span",{children:[e.jsx(y,{style:{marginRight:8}}),"About Us Management"]}),extra:e.jsxs(B,{children:[e.jsx(f,{icon:e.jsx(M,{}),onClick:()=>o(x()),loading:a,children:"Refresh"}),e.jsx(f,{type:"primary",icon:e.jsx(b,{}),onClick:()=>r(!0),children:t?"Edit About Us":"Create About Us"})]}),children:[a?e.jsx("div",{style:{textAlign:"center",padding:"50px"},children:e.jsx(v,{size:"large"})}):t?e.jsx("div",{children:e.jsxs(u,{bordered:!0,column:1,size:"default",labelStyle:{fontWeight:"bold",width:"150px"},children:[e.jsx(u.Item,{label:"Title",children:e.jsx(g,{color:"blue",style:{fontSize:"16px",padding:"4px 8px"},children:t.title})}),e.jsx(u.Item,{label:"Content",children:e.jsx("div",{style:{padding:"16px",backgroundColor:"#fafafa",borderRadius:"6px",maxHeight:"400px",overflowY:"auto"},children:U(t.content)})}),e.jsx(u.Item,{label:"Last Updated",children:new Date(t.updatedAt).toLocaleString()})]})}):e.jsxs("div",{style:{textAlign:"center",padding:"50px",border:"2px dashed #d9d9d9",borderRadius:"8px"},children:[e.jsx(k,{style:{fontSize:"48px",color:"#d9d9d9",marginBottom:"16px"}}),e.jsx("h3",{style:{color:"#999",marginBottom:"8px"},children:"No About Us Content"}),e.jsx("p",{style:{color:"#999",marginBottom:"16px"},children:'Click "Create About Us" to add your company information'}),e.jsx(f,{type:"primary",icon:e.jsx(b,{}),onClick:()=>r(!0),children:"Create About Us"})]}),e.jsx(E,{title:t?"Edit About Us":"Create About Us",open:c,onCancel:()=>r(!1),onOk:C,okText:t?"Update":"Create",confirmLoading:i,width:800,destroyOnClose:!0,children:e.jsx(L,{visible:c,onCancel:()=>r(!1),onSubmit:A,initialData:t,loading:i})})]})};export{Y as default};
