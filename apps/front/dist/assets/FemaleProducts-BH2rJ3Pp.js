import{b as l,j as e,u as O,a as M,$ as y,a0 as N,a1 as v,a2 as A}from"./index-BUwxZ0dz.js";import{F as a,I as f,B as x}from"./index-D91Dgcjk.js";import{T as U}from"./index-BsRJsCrQ.js";import{U as C,F as $,P as q,R as _}from"./DeleteOutlined-CY-A2Q_x.js";import{R as P}from"./UploadOutlined-BZUwM306.js";import{s as g,C as B}from"./AntdIcon-D9VCaoNQ.js";import{M as V}from"./index-HnUezucs.js";import{S}from"./index-DenBw2B0.js";import{R as z}from"./ReloadOutlined-aA4FmXlz.js";import{R as K}from"./PlusOutlined-05gYRiNT.js";import{T as w,R as Y}from"./EditOutlined-BMN32wtQ.js";import"./objectWithoutPropertiesLoose-k0w7FEql.js";const G=({visible:n,onSubmit:I,initialData:t})=>{const[m]=a.useForm(),[u,c]=l.useState([]),[p,d]=l.useState([]);l.useEffect(()=>{t&&n?(m.setFieldsValue({name:t.name,price:t.price,offer:t.offer,rating:t.rating,tag:t.tag,description:t.description,reviews:t.reviews}),c(t.image?[{uid:"-1",name:"Existing Image",status:"done",url:t.image}]:[]),d(t.icons&&t.icons.length>0?[{uid:"-2",name:"Existing Icon",status:"done",url:t.icons[0]}]:[])):(m.resetFields(),c([]),d([]))},[t,m,n]);const h=async o=>{try{const s=new FormData;s.append("name",o.name),s.append("price",o.price.toString()),s.append("offer",o.offer||""),s.append("rating",o.rating||""),s.append("tag",o.tag||""),s.append("description",o.description||""),s.append("reviews",o.reviews||""),s.append("gender","Female"),u.length>0&&u[0].originFileObj&&s.append("image",u[0].originFileObj),p.length>0&&p[0].originFileObj&&s.append("icons",p[0].originFileObj),await I(s,t==null?void 0:t._id)}catch{g.error("Something went wrong while saving the female product")}};return e.jsxs(a,{form:m,layout:"vertical",onFinish:h,className:"female-product-form",children:[e.jsx(a.Item,{name:"name",label:"Product Name",rules:[{required:!0,message:"Please enter product name"}],children:e.jsx(f,{placeholder:"Enter female product name"})}),e.jsx(a.Item,{name:"price",label:"Price",rules:[{required:!0,message:"Please enter price"}],children:e.jsx(U,{min:0,style:{width:"100%"},placeholder:"Enter product price"})}),e.jsx(a.Item,{name:"offer",label:"Offer",children:e.jsx(f,{placeholder:"Enter offer details"})}),e.jsx(a.Item,{name:"rating",label:"Rating",children:e.jsx(f,{placeholder:"Enter rating (e.g. 4.5)"})}),e.jsx(a.Item,{name:"tag",label:"Tag",children:e.jsx(f,{placeholder:"Product tag (e.g. new, hot, etc.)"})}),e.jsx(a.Item,{name:"description",label:"Description",children:e.jsx(f.TextArea,{rows:3,placeholder:"Enter product description for female customers"})}),e.jsx(a.Item,{name:"reviews",label:"Reviews",children:e.jsx(f,{placeholder:"Enter review info"})}),e.jsxs(a.Item,{label:"Main Image",rules:t?[]:[{required:!0,message:"Please upload product image"}],children:[e.jsx(C,{listType:"picture",maxCount:1,fileList:u,onChange:({fileList:o})=>c(o),beforeUpload:()=>!1,accept:"image/*",children:e.jsx(x,{icon:e.jsx(P,{}),children:t?"Change Main Image":"Upload Main Image"})}),!t&&e.jsx("div",{style:{color:"#999",fontSize:"12px",marginTop:"4px"},children:"Main image is required for new products"})]}),e.jsx(a.Item,{label:"Icon",children:e.jsx(C,{listType:"picture",maxCount:1,fileList:p,onChange:({fileList:o})=>d(o),beforeUpload:()=>!1,accept:"image/*",children:e.jsx(x,{icon:e.jsx(P,{}),children:t?"Change Icon":"Upload Icon"})})}),e.jsx("button",{type:"submit",style:{display:"none"},className:"female-product-form-submit-button"})]})},{Search:H}=f,ae=()=>{const n=O(),{products:I=[],loading:t=!1,error:m=null}=M(r=>r.products),[u,c]=l.useState(!1),[p,d]=l.useState(null),[h,o]=l.useState(""),[s,b]=l.useState(!1);l.useEffect(()=>{n(y())},[n]),l.useEffect(()=>{m&&g.error(m)},[m]);const F=I.filter(r=>r.gender==="Female"),k=async(r,i)=>{try{b(!0),i?(await n(N({id:i,formData:r})).unwrap(),g.success("âœ… Female product updated successfully")):(await n(v(r)).unwrap(),g.success("âœ… Female product added successfully")),c(!1),d(null),n(y())}catch(j){g.error(j||"Operation failed")}finally{b(!1)}},R=async r=>{try{await n(A(r)).unwrap(),g.success("ðŸ—‘ï¸ Female product deleted successfully"),n(y())}catch{g.error("Failed to delete product")}},T=()=>{const r=document.querySelector(".female-product-form-submit-button");r&&r.click()},E=F.filter(r=>{var i,j;return r.name.toLowerCase().includes(h.toLowerCase())||((i=r.description)==null?void 0:i.toLowerCase().includes(h.toLowerCase()))||((j=r.tag)==null?void 0:j.toLowerCase().includes(h.toLowerCase()))}),L=[{title:"Image",dataIndex:"image",key:"image",render:r=>r?e.jsx("img",{src:r,alt:"product",width:60,height:60,style:{borderRadius:6,objectFit:"cover"}}):e.jsx(w,{color:"red",children:"No Image"})},{title:"Name",dataIndex:"name",key:"name"},{title:"Price",dataIndex:"price",key:"price",render:r=>`â‚¹${r}`},{title:"Offer",dataIndex:"offer",key:"offer",render:r=>r||"-"},{title:"Rating",dataIndex:"rating",key:"rating",render:r=>r||"-"},{title:"Tag",dataIndex:"tag",key:"tag",render:r=>r?e.jsx(w,{color:"blue",children:r}):"-"},{title:"Description",dataIndex:"description",key:"description",ellipsis:!0},{title:"Icon",dataIndex:"icons",key:"icons",render:r=>r&&r.length>0?e.jsx("img",{src:r[0],alt:"icon",width:40,height:40,style:{borderRadius:6,objectFit:"cover"}}):e.jsx(w,{children:"No Icon"})},{title:"Actions",key:"actions",render:(r,i)=>e.jsxs(S,{children:[e.jsx(x,{type:"primary",icon:e.jsx(Y,{}),onClick:()=>{d(i),c(!0)}}),e.jsx(q,{title:"Are you sure to delete this female product?",onConfirm:()=>R(i._id),okText:"Yes",cancelText:"No",children:e.jsx(x,{danger:!0,icon:e.jsx(_,{})})})]})}];return e.jsxs(B,{title:e.jsxs("span",{children:["Female Products Â  (",F.length," products)"]}),extra:e.jsxs(S,{children:[e.jsx(x,{icon:e.jsx(z,{}),onClick:()=>n(y()),loading:t,children:"Refresh"}),e.jsx(x,{type:"primary",icon:e.jsx(K,{}),onClick:()=>{d(null),c(!0)},children:"Add Product"})]}),children:[e.jsx(H,{placeholder:"Search female products...",value:h,onChange:r=>o(r.target.value),allowClear:!0,style:{marginBottom:16,width:"50%"}}),e.jsx($,{rowKey:"_id",columns:L,dataSource:E,loading:t,pagination:{pageSize:5},locale:{emptyText:"No female products found"}}),e.jsx(V,{title:p?"Edit Female Product":"Add Product",open:u,onCancel:()=>{c(!1),d(null)},onOk:T,okText:p?"Update":"Create",confirmLoading:s,width:700,destroyOnClose:!0,children:e.jsx(G,{visible:u,onCancel:()=>{c(!1),d(null)},onSubmit:k,initialData:p,loading:s})})]})};export{ae as default};
